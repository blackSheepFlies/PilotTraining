<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pilotentraining – Assessment & Tools</title>
  <meta name="description" content="Assessment-Training für angehende Piloten und praktische Tools für aktive Piloten – von Laurin & Bernadette." />
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#ffffff" />
  <style>
    :root{
      --bg:#f8fafc; --panel:#ffffff; --muted:#475569; --text:#0f172a; --accent:#2563eb; --accent-2:#06b6d4;
      --radius:18px; --shadow: 0 6px 20px rgba(0,0,0,.15);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;color:var(--text);font:16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial;
      background: var(--bg) url('icons/airplane-bg.jpg') no-repeat center center fixed;
      background-size: cover;
    }
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:1100px;margin:0 auto;padding:24px;background:rgba(255,255,255,0.9);border-radius:var(--radius);box-shadow:var(--shadow)}
    header{display:flex;gap:18px;align-items:center;justify-content:space-between;padding:18px 0}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:38px;height:38px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));box-shadow:var(--shadow)}
    .brand h1{font-size:18px;margin:0}
    nav{display:flex;gap:14px;flex-wrap:wrap}
    nav a{padding:10px 14px;border:1px solid #cbd5e1;border-radius:999px;color:var(--text);background:#f1f5f9}
    .hero{border-radius:var(--radius);box-shadow:var(--shadow);padding:36px;background:rgba(255,255,255,0.85)}
    .hero h2{font-size:32px;margin:0 0 8px}
    .hero p{color:var(--muted);margin:0 0 16px}
    .cta{display:flex;gap:12px;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;gap:8px;border-radius:12px;padding:12px 16px;border:1px solid #cbd5e1;background:#f1f5f9;color:var(--text)}
    .btn.primary{background:linear-gradient(180deg,#3b82f6,#2563eb);color:white;border:none}
    .btn.install{background:linear-gradient(180deg,#22d3ee,#06b6d4);color:white;border:none}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:18px;margin-top:22px}
    .card{grid-column:span 12;background:#ffffff;border:1px solid #e2e8f0;border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}
    @media(min-width:720px){.card{grid-column:span 6}}
    @media(min-width:1024px){.card{grid-column:span 4}}
    .card h3{margin:0 0 6px}
    .card p{margin:0 0 12px;color:var(--muted)}
    .pill{display:inline-block;padding:4px 10px;border-radius:999px;border:1px solid #e2e8f0;background:#f1f5f9;color:#2563eb;font-size:12px}
    .footer{opacity:.8;margin-top:28px;font-size:14px}
    .notice{font-size:12px;color:#64748b;margin-top:8px}
    section{margin-top:34px}
    section h2{font-size:22px;margin:0 0 10px}
    dialog{border:none;border-radius:16px;box-shadow:var(--shadow);background:#ffffff;color:var(--text);max-width:800px;width:92%}
    dialog::backdrop{background:rgba(0,0,0,.4)}
    .modal-head{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid #e2e8f0}
    .modal-body{padding:16px}
    .chip{font-size:12px;border:1px dashed #cbd5e1;color:var(--muted);padding:3px 8px;border-radius:999px}
    code.inline{background:#f1f5f9;border:1px solid #e2e8f0;padding:2px 6px;border-radius:6px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <h1>Pilotentraining</h1>
      </div>
      <nav aria-label="Hauptnavigation">
        <a href="#assessment">Assessment</a>
        <a href="#tools">Pilotentools</a>
        <a href="#infos">Infos</a>
      </nav>
    </header>

    <main>
      <section class="hero" aria-label="Intro">
        <h2>Assessment üben. Flugbetrieb vereinfachen.</h2>
        <p>Eine schlanke Startseite von Laurin & Bernadette: Übungsmodule für angehende Piloten, plus Tools & Helferlein für den Alltag im Cockpit.</p>
        <div class="cta">
          <a class="btn primary" href="#assessment">Zu den Assessment-Modulen</a>
          <a class="btn" href="#tools">Zu den Pilotentools</a>
          <button id="installBtn" class="btn install" hidden>App installieren</button>
        </div>
        <p class="notice">Offlinefähig: Beim ersten Besuch werden Inhalte zwischengespeichert. <span class="chip">PWA</span></p>
      </section>

      <section id="assessment">
        <h2>Assessment-Module</h2>
        <div class="grid">
          <article class="card" aria-labelledby="mod1">
            <div class="pill">Quiz • offlinefähig</div>
            <h3 id="mod1">Cognitive & Psychometric Trainer</h3>
            <p>Reaktionszeit, Arbeitsgedächtnis, räumliches Denken. Mit anpassbaren Übungssets und Auswertungen (lokal gespeichert).</p>
            <div class="cta">
              <button class="btn" data-open-modal="cog">Im Fenster öffnen</button>
              <a class="btn" href="modules/cog-trainer/index.html">Vollbild</a>
            </div>
          </article>
        </div>
      </section>

      <section id="tools">
        <h2>Pilotentools</h2>
        <div class="grid">
          <article class="card" aria-labelledby="tool1">
            <div class="pill">Calculator • offlinefähig</div>
            <h3 id="tool1">W&B Rechner</h3>
            <p>Gewicht & Schwerpunktberechnung (Generisch). Speicherung der Flugzeug-Profile lokal.</p>
            <a class="btn" href="tools/wb/index.html">Öffnen</a>
          </article>
        </div>
        <p class="notice">Datenschutz: Alle lokalen Tools speichern nur in deinem Browser (IndexedDB/LocalStorage). Nichts wird ohne deine Aktion hochgeladen.</p>
      </section>

      <section id="infos">
        <h2>Hinweise</h2>
        <div class="card">
          <ul>
            <li><strong>Offline-Nutzung:</strong> Seite einmal öffnen → wird automatisch gecached. Updates erfolgen beim nächsten Online-Besuch.</li>
            <li><strong>Export/Import:</strong> Fortschritte & Einstellungen als <code class="inline">.json</code> exportierbar – ideal für Backups.</li>
            <li><strong>Haftungsausschluss:</strong> Tools sind Lern-/Planungshilfen und keine Quelle für operative Freigaben.</li>
          </ul>
        </div>
      </section>

      <footer class="footer">
        © <span id="year"></span> Laurin & Bernadette • <a href="#">Impressum</a> • <a href="#">Datenschutz</a>
      </footer>
    </main>

    <dialog id="modal">
      <div class="modal-head">
        <strong id="modalTitle">Modul</strong>
        <button class="btn" id="closeModal">Schließen</button>
      </div>
      <div class="modal-body">
        <iframe id="modalFrame" title="Embedded Tool" style="width:100%;height:60vh;border:none;border-radius:12px;background:#f1f5f9"></iframe>
      </div>
    </dialog>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    const modal = document.getElementById('modal');
    const closeModal = document.getElementById('closeModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalFrame = document.getElementById('modalFrame');
    document.querySelectorAll('[data-open-modal]').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const key = btn.getAttribute('data-open-modal');
        const map = { cog: 'modules/cog-trainer/index.html' };
        modalTitle.textContent = btn.closest('.card').querySelector('h3').textContent;
        modalFrame.src = map[key] || '#';
        modal.showModal();
      });
    });
    closeModal.addEventListener('click',()=>modal.close());

    let deferredPrompt; const installBtn = document.getElementById('installBtn');
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault(); deferredPrompt = e; installBtn.hidden = false;
    });
    installBtn?.addEventListener('click', async () => {
      if (!deferredPrompt) return; deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice; deferredPrompt = null; installBtn.hidden = true;
    });

    if ('serviceWorker' in navigator) {
      window.addEventListener('load', ()=>{
        navigator.serviceWorker.register('./sw.js').catch(console.error);
      });
    }
  </script>
</body>
</html>
